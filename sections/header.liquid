<header>
	<div class="container">
		<div class="header grid grid-cols-[1fr_2fr_1fr] items-center gap-[40px] py-[40px]">
			<div class="header__logo">
				{% if section.settings.logo != blank %}
					<a href="/">
						{{ section.settings.logo | image_url: width: 200 | image_tag: loading: 'lazy' }}
					</a>
					{% else %}
						<a href="/">
							{{ shop.name }}
						</a>
				{% endif %}
			</div>

			<nav class="header__menu flex justify-center" x-data>
        <button class="header__menu-burger" @click="$dispatch('toggle-menu')" type="button"> 
          <span></span>
        </button>

        <ul class="header__menu-nav flex gap-[30px]">
          {% for link in section.settings.menu.links %}
            {% if link.links != blank %}
              <li class="nav__item group py-[10px] relative">
                  <a class="hover:text-accent" href="{{ link.url }}">{{ link.title }}</a>
                  <ul class="nav__item-submenu hidden group-hover:block">
                    {% for sublink in linklists[link.handle].links %}
                      <li>
                        <a class="hover:text-accent" href="{{ sublink.url }}">
                          {{ sublink.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
              </li>
            {% else %}
              <li class="nav__item py-[10px]">
                <a class="hover:text-accent" href="{{ link.url }}"> {{ link.title }}</a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </nav>

			<div class="header__icons flex items-center justify-end gap-5"
        x-data="{ cart_count: {{ cart.item_count }} }"
        @cart-count-updated.window="cart_count = $event.detail">
        {%- if shop.customer_accounts_enabled -%}
          <div class="relative account-menu-wrapper z-10">
            <a href="{{ routes.account_url }}" 
              title="account link"
              class="header__icon block text-center">
              {% render 'icon-account', class: 'w-10 mx-auto stroke-textColor hover:stroke-accent' %}
            </a>
          </div>
        {%- endif -%}

          <button 
            type="button"
            title="Cart button"
            @click="$dispatch('toggle-cart')"
            class="header__icon text-center relative group">
              {% render 'icon-cart', class: 'w-10 stroke-textColor group-hover:stroke-accent' %}
              <span x-text="cart_count" class="cart__count min-w-[22px] text-sm min-h-[22px] absolute grid place-content-center rounded-full -top-3 -right-1 text-white bg-black group-hover:bg-accent"> {{ cart.item_count }} </span>
          </button>
      </div>
		</div>
	</div>
</header>

{% schema %}
	{
		"name": "Header",
		"settings": [
			{
				"type": "image_picker",
				"id": "logo",
				"label": "Logo"
			},
			{
				"type": "link_list",
				"id": "menu",
				"default": "main-menu",
				"label": "Menu"
			}
		]
	}
{% endschema %}